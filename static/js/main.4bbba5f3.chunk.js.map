{"version":3,"sources":["data/states.csv","map.js","loadData.js","mapPoints.js","dropdownMenu.js","App.js","index.js"],"names":["module","exports","showBottomTipIds","Map","renderMap","props","states","mapPoints","selectedOption","svg","d3","select","remove","mapG","append","width","document","body","clientWidth","height","clientHeight","colorValue","d","properties","value","margin","innerWidth","innerHeight","attr","projection","scale","translate","path","blue","domain","map","interpolator","gUpdate","selectAll","data","gEnter","enter","g","merge","call","on","transform","statePaths","tip","d3Tip","html","name","join","statePathsEnter","includes","id","direction","show","this","hide","exit","circles","circlesEnter","Component","loadData","Promise","all","csv","csvFile","then","csvData","stateFeatures","feature","stateJson","objects","features","rowById","reduce","accumulator","forEach","Object","assign","filter","s","us","catch","err","console","log","DropdownMenu","drawSelect","options","onOptionClicked","option","property","text","App","state","selectedProperty","loadAllData","res","setState","find","o","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.4bbba5f3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/states.a2067fe0.csv\";","// import d3, {\n//   select,\n//   selectAll,\n//   geoPath,\n//   geoAlbersUsa,\n//   max,\n//   scaleSequential,\n//   interpolateBlues,\n//   event,\n//   zoom,\n//   tip,\n//   extent\n// } from \"d3\";\n\nimport React, {Component} from 'react'\nimport * as d3 from 'd3'\n\nimport d3Tip from \"d3-tip\";\n\nconst showBottomTipIds = [\n  23,\n  33,\n  50,\n  36,\n  25,\n  9,\n  44,\n  26,\n  55,\n  27,\n  38,\n  46,\n  30,\n  16,\n  53,\n  41\n];\n\nexport default class Map extends Component {\n  \n  renderMap = () => {\n    const {\n      states,\n      mapPoints,\n      selectedOption\n    } = this.props;\n\n    const svg = d3.select(\"svg\");\n    svg.select('g').remove();\n    const mapG = svg.append(\"g\");\n    const width = document.body.clientWidth;\n    const height = document.body.clientHeight;\n    const colorValue = d => +d.properties[selectedOption.value];\n\n    const margin = {\n      top: 50,\n      bottom: 50,\n      left: 100,\n      right: 100\n    };\n\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n\n    svg\n      .attr(\"width\", innerWidth)\n      .attr(\"height\", innerHeight)\n      .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n    // set projection\n    var projection = d3\n      .geoAlbersUsa()\n      .scale(1600)\n      .translate([innerWidth / 2, innerHeight / 2]);\n\n    // create path variable\n    var path = d3.geoPath().projection(projection);\n\n    const blue = d3\n      .scaleSequential()\n      .domain(d3.extent(states.map(colorValue)))\n      .interpolator(d3.interpolateBlues);\n\n    const gUpdate = mapG.selectAll(\"g\").data([null]);\n    const gEnter = gUpdate.enter().append(\"g\");\n    const g = gUpdate.merge(gEnter);\n\n    mapG.call(\n      d3.zoom().on(\"zoom\", () => {\n        g.attr(\"transform\", d3.event.transform);\n      })\n    );\n\n    const statePaths = g.selectAll(\".states\").data(states);\n\n    var tip = d3Tip()\n      .attr(\"class\", \"d3-tip\")\n      .html(function(d) {\n        return [\n          d.properties.name,\n          `<div><p>${selectedOption.name}: </p><p>${\n            d.properties[selectedOption.value]\n          }</p></div>`\n          // \"<div><p>Annual per capita consumption: </p><p>\",\n          // d.properties.annual_per_capita_consumption,\n          // \" gallons</p></div>\",\n          // \"<div><p>Total Beer Consumption: </p><p> \",\n          // d.properties.total_beer_consumption,\n          // \" million gallons</p></div>\",\n          // \"<div><p>5 yr Consumption Change: </p><p>\",\n          // d.properties.five_yr_consumption_change,\n          // \"%\",\n          // \"</p></div>\",\n          // \"<div><p>Bars and restaurants / 100,000 people: </p><p>\",\n          // d.properties.bars_resturants_per_1000_people,\n          // \"</p></div>\",\n          // \"<div><p>Beer tax rate: </p><p>$\",\n          // d.properties.beer_tax_rate,\n          // \" per gallon</p></div>\"\n        ].join(\"\");\n      });\n    mapG.call(tip);\n\n    const statePathsEnter = statePaths\n      .enter()\n      .append(\"path\")\n      .attr(\"class\", \"states\");\n\n    statePaths\n      .merge(statePathsEnter)\n      .attr(\"d\", path)\n      .attr(\"fill\", d => blue(colorValue(d)))\n      .on(\"mouseover\", function(d) {\n        if (showBottomTipIds.includes(d.id)) {\n          tip.direction(\"s\");\n        } else {\n          tip.direction(\"n\");\n        }\n        tip.show(d, this);\n      })\n      .on(\"mouseout\", tip.hide);\n\n      statePaths.exit().remove();\n\n    const circles = g.selectAll(\"circle\").data(mapPoints);\n\n    const circlesEnter = circles.enter().append(\"circle\");\n\n    circles\n      .merge(circlesEnter)\n      .attr(\"cx\", d => projection(d)[0])\n      .attr(\"cy\", d => projection(d)[1])\n      .attr(\"r\", \"4px\")\n      .attr(\"fill\", \"red\");\n  };\n  \n\n  render() {\n    this.renderMap();\n    return <svg></svg>;\n  }\n}\n","import {csv} from 'd3-fetch'\nimport stateJson from './data/us-json.json'\nimport csvFile from './data/states.csv'\n\nimport { feature } from \"topojson\";\n\nexport const loadData = () =>\n  Promise.all([csv(csvFile)]).then(\n    ([csvData]) => {\n      const stateFeatures = feature(stateJson, stateJson.objects.states).features\n\n      const rowById = csvData.reduce((accumulator, d) => {\n        accumulator[+d.id] = d;\n        return accumulator;\n      }, {});\n\n      stateFeatures.forEach(d => {\n        Object.assign(d.properties, rowById[d.id]);\n      });\n\n      // filter out dc, virgin islands, Puerto Rico\n      const states = stateFeatures.filter(\n        s => s.id !== 11 && s.id !== 72 && s.id !== 78\n      );\n\n      return { states, us: stateJson };\n    }\n  ).catch(err => console.log(err));\n","export const mapPoints = [\n\t[-122.490402, 37.786453],\n  [-120.389809, 37.72728],\n  [-83.1290782, 40.0913914],\n  [-83.3958186, 39.6085308]\n]","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\n\nexport default class DropdownMenu extends Component {\n  componentDidMount() {\n    this.drawSelect();\n  }\n\n  drawSelect = () => {\n    const { options, onOptionClicked, selectedOption } = this.props;\n\n    let select = d3.select(\"#menu\").selectAll(\"select\").data([null]);\n    select = select\n      .enter()\n      .append(\"select\")\n      .merge(select)\n      .on(\"change\", function() {\n        onOptionClicked(this.value);\n      });\n\n    const option = select.selectAll(\"option\").data(options);\n    option\n      .enter()\n      .append(\"option\")\n      .merge(option)\n      .attr(\"value\", d => d.value)\n      .property(\"selected\", d => d.value === selectedOption)\n      .text(d => d.name);\n  };\n\n  render() {\n    return <div id=\"menu\"></div>;\n  }\n}\n","import React, { Component } from \"react\";\nimport Map from \"./map\";\nimport { loadData } from \"./loadData\";\nimport { mapPoints } from \"./mapPoints\";\nimport DropdownMenu from \"./dropdownMenu\";\n\nconst options = [\n  {\n    value: \"annual_per_capita_consumption\",\n    name: \"Annual per capita consumption\"\n  },\n  { value: \"total_beer_consumption\", name: \"Total beer consumption\" },\n  { value: \"five_yr_consumption_change\", name: \"5 yr. consumption change\" },\n  {\n    value: \"bars_resturants_per_1000_people\",\n    name: \"Bars and restaurants per 100,000 people\"\n  },\n  { value: \"beer_tax_rate\", name: \"Beer tax rate\" }\n];\n\nexport default class App extends Component {\n  state = {\n    states: [],\n    us: {},\n    selectedProperty: \"annual_per_capita_consumption\",\n    selectedOption: {\n      value: \"annual_per_capita_consumption\",\n      name: \"Annual per capita consumption\"\n    },\n  };\n  componentDidMount() {\n    this.loadAllData();\n  }\n  \n  loadAllData = () => {\n    loadData().then(res => {\n      this.setState({ states: res.states, us: res.us });\n    });\n  };\n  onOptionClicked = property => {\n    this.setState({\n      selectedProperty: property,\n      selectedOption: options.find(o => o.value === property)\n    });\n  };\n  \n\n  render() {\n    const { states, selectedOption } = this.state;\n    return <div>\n      <DropdownMenu options={options} onOptionClicked={this.onOptionClicked} selectedOption={selectedOption} />\n      <Map\n        states={states}\n        selectedOption={selectedOption}\n        mapPoints={mapPoints}\n      />\n    </div>;\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();"],"sourceRoot":""}